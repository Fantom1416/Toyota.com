/**
* Â© 2018 Toyota Motor Sales, U.S.A., Inc.
*/
!function o(r,i,a){function s(t,e){if(!i[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},r[t][0].call(n.exports,function(e){return s(r[t][1][e]||e)},n,n.exports,o,r,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){t.exports={dgSpasMain:"dg-spas-main",wsApp:"ws-app",dgApp:"dg-app",dgComponentMain:"dg-component-main",dgUI:"dg-ui"}},{}],2:[function(e,t,n){var o={TOYOTA:"toyota",LEXUS:"lexus"};Object.freeze(o),t.exports=o},{}],3:[function(e,t,n){var o=e("../utilities/getDeployEnv"),e=e("../utilities/getAzureEnv");t.exports={dgid:"dgid_"+o,accessToken:"id_token"+(e?"_"+e:""),refreshToken:"refresh_token_"+o,logoutData:"dg_logout_data_"+o,triedItFlag:"dg-set",accessCode:"user_access_code_"+o}},{"../utilities/getAzureEnv":14,"../utilities/getDeployEnv":15}],4:[function(e,t,n){var o={Toyota:{T1:"toyota.com",T2:"buyatoyota.com"},Lexus:{T1:"lexus.com"},local:"local",none:"none"};Object.freeze(o),t.exports=o},{}],5:[function(e,t,n){const o=e("merge"),r=e("../utilities/generateGuid"),i=e("../constants/brands"),a=e("../utilities/client/isLexus"),s=e("js-cookie"),c=e("../constants/cookieNames");t.exports={Garage:class{constructor(e){if(!e)throw new Error("Garage constructor called with no parameters");var t=s.get(c.dgid)||r();this.dgid=t,this.timeCreated=Date.now(),this.name=null,this.tokenExpiry=null,this.hasBeenNotifiedOfExpiringToken=!1,this.toyotaActiveDealer={isMstc:!1,dealerCd:"Toyota",brand:i.TOYOTA,changeTime:Date.now(),name:null,isGxp:!1,url:"https://www.toyota.com"},this.lexusActiveDealer={isMstc:!1,dealerCd:"Lexus",brand:i.LEXUS,changeTime:Date.now(),name:null,isGxp:!1,url:"https://www.lexus.com"},this.dealers={Toyota:{dealerCd:i.TOYOTA,changeTime:Date.now(),name:null,isGxp:!1,brand:"Toyota",url:"https://www.toyota.com"},Lexus:{dealerCd:"Lexus",brand:i.LEXUS,changeTime:Date.now(),name:null,isGxp:!1,url:"https://www.lexus.com"}},this.items={},this.notifications={},this.onboarding={owned:"new",offer:"new",build:"new",search:"new",inv:"new"},this.optOutEmail=!1,this.optOutText=!1,this.canShow=!1,this.showSmartPathModal=!0,this.showProgressTrackerOnboarding=!0,this.sharedSavesDealers={},this.submittedEstimateLeadDealers={},this.epriceUnlockedDealers={},o.recursive(this,e),this.activeDealer&&!e.toyotaActiveDealer&&(this.activeDealer.brand&&(this.activeDealer.brand.toLowerCase()===i.TOYOTA.toLowerCase()?this.toyotaActiveDealer=this.activeDealer:this.activeDealer.brand.toLowerCase()===i.LEXUS.toLowerCase()&&(this.lexusActiveDealer=this.activeDealer)),delete this.activeDealer),a()?this.activeDealer=this.lexusActiveDealer:this.activeDealer=this.toyotaActiveDealer,this.exportJson=this.exportJson.bind(this)}exportJson(){const e={};for(const t of Object.keys(this))this.hasOwnProperty(t)&&"function"!=typeof this[t]&&"name"!==t&&"tokenExpiry"!==t&&(e[t]=this[t]);return e}}}},{"../constants/brands":2,"../constants/cookieNames":3,"../utilities/client/isLexus":9,"../utilities/generateGuid":13,"js-cookie":20,merge:21}],6:[function(e,t,n){const o=e("../utilities/getDeployEnvFunction");t.exports=class{constructor(e){if(!e)throw new Error("Logger constructor called with no module name");this.moduleName=e,this.debug=this.debug.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}get _deployEnv(){try{return this.__deployEnv=this.__deployEnv||o(),this.__deployEnv}catch(e){return}}debug(...e){this._deployEnv&&"prod"!==this._deployEnv&&"demo"!==this._deployEnv&&window.console.debug(this.moduleName+": ",...e)}info(...e){this._deployEnv&&"prod"!==this._deployEnv&&window.console.info(this.moduleName+": ",...e)}warn(...e){window.console.warn(this.moduleName+": ",...e)}error(...e){window.console.error(this.moduleName+": ",...e)}}},{"../utilities/getDeployEnvFunction":16}],7:[function(e,t,n){const o=e("../../constants/brands"),r=e("../../models/Logger");t.exports=(e="dg-commons-library")=>{const t=new r(e);let n;var e="undefined"!=typeof window&&window;if(n=e&&window.DGDataHub&&window.DGDataHub.BRAND?window.DGDataHub.BRAND:o.TOYOTA,e=n,o[e.toUpperCase()])return n.toLowerCase();e=`Error: Unsupported brand specified. Please specify one of these values: ${Object.keys(o).map(e=>o[e]).join(", ")}.`;throw t.error(e),new Error(e)}},{"../../constants/brands":2,"../../models/Logger":6}],8:[function(e,t,n){t.exports=function(){let e;if("undefined"!=typeof window&&window.location&&window.location.host){var t=window.location.host.split(".");return 1<t.length?(e=t[t.length-2]+"."+t[t.length-1],e):(e=t[0]||"localhost",e)}return null}},{}],9:[function(e,t,n){const o=e("./getBrand"),r=e("../../constants/brands.js");t.exports=function(e){return(e&&"string"==typeof e?e.toLowerCase():o())===r.LEXUS}},{"../../constants/brands.js":2,"./getBrand":7}],10:[function(e,t,n){const o=e("./getPageOrigin"),r=e("./../../constants/tierSites");t.exports=function(){return o()===r.Toyota.T1}},{"./../../constants/tierSites":4,"./getPageOrigin":8}],11:[function(e,t,n){t.exports=function a(s,c){return new Promise(function(t,n){try{const o=c||1;let e=s.method;e=e||"GET";const r=s.url;if(!r)return void n("No URL provided to request service");const i=new XMLHttpRequest;i.open(e,r,!0),i.withCredentials=!!s.withCredentials,i.onload=function(){var e={data:i.response,status:i.status};(200<=e.status&&e.status<400?t:n)(e)},i.onerror=function(){o<3?a(s,o+1).then(e=>{t(e)}).catch(e=>{n(e)}):n(`Could not perform a ${e} on URL `+r)},s.contentType&&i.setRequestHeader("Content-Type",s.contentType+"; charset=UTF-8"),s.headers&&s.headers.length&&s.headers.forEach(function(e){e.name&&e.name.length&&e.value&&i.setRequestHeader(e.name,e.value)}),s.accept?i.setRequestHeader("Accept",s.accept):i.setRequestHeader("Accept","*/*"),i.send(s.data)}catch(e){n(e)}})}},{}],12:[function(e,t,n){t.exports=function(e){const t=new Event("showMyAccount");if(t.shouldShowMyAccount=e,window&&window.document){const n=document.getElementById("dg-component-nav-menu-desktop");n&&n.dispatchEvent(t),window.DGDataHub&&(window.DGDataHub.shouldShowMyAccount=e)}}},{}],13:[function(e,t,n){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,function(e){let t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}},{}],14:[function(e,t,n){let o="";switch(e("../utilities/getDeployEnv")){case"dev":o="rtb2cdev";break;case"test":o="rtb2ctest";break;case"stage":case"demo":o="tmnab2cqa";break;case"prod":o=""}t.exports=o},{"../utilities/getDeployEnv":15}],15:[function(e,t,n){const o=e("./getDeployEnvFunction");t.exports=o()},{"./getDeployEnvFunction":16}],16:[function(e,t,n){!function(e){!function(){t.exports=function(){return("undefined"==typeof window?e.env:window.DGDataHub).DEPLOY_ENV}}.call(this)}.call(this,e("_process"))},{_process:22}],17:[function(e,t,n){const i=e("./client/getBrand"),a=e("./getDeployEnvFunction");t.exports=function(){var e,t,n=a(),o=i();const r={deployEnv:n};switch(n){case"local":return e={},t=i(),e.deployEnv="local",e.host="localhost",e.garageUrl=`http://${e.host}:8081/garage/`,e.libUrl=`http://${e.host}:3000/dist/deploy/{{name}}.min.js`,e.compUrl=`http://${e.host}:3050/dist/deploy/{{name}}-${t}.min.js`,e.spaUrl=`http://${e.host}:3060/dist/deploy/{{name}}-${t}.min.js`,e.uiUrl=`http://${e.host}:8080/{{name}}-entry.min.js`,e.wsUrl=`http://${e.host}:3030/dist/{{name}}.min.js`,e.rticHost="https://api.stage.rtic.toyota.com",e.disUrl=`https://${e.rticHost}/api/dealer/`,e.analyticsUrl="https://nexus.ensighten.com/toyotanational/stage/Bootstrap.js",e;case void 0:break;case"prod":r.host="api.dg.toyota.com",r.cdn="cdn.dg.toyota.com",r.rticHost="api.rtic.toyota.com";break;default:r.host=`api.${n}.dg.toyota.com`,r.cdn=`cdn.${n}.dg.toyota.com`,r.rticHost=`api.${n}.rtic.toyota.com`}return r.garageUrl=r.host&&`https://${r.host}/garage/`,r.compUrl=r.cdn&&`https://${r.cdn}/deploy/dg-components/{{version}}/deploy/{{name}}-${o}.min.js`,r.spaUrl=r.cdn&&`https://${r.cdn}/deploy/dg-pages/{{version}}/deploy/{{name}}-${o}.min.js`,r.wsUrl=r.cdn&&`https://${r.cdn}/deploy/websocket-library/{{version}}/{{name}}.min.js`,r.uiUrl=r.cdn&&`https://${r.cdn}/deploy/dg-ui/{{version}}/${o}/{{name}}-entry.min.js`,r.disUrl=r.rticHost&&`https://${r.rticHost}/api/dealer/`,r.analyticsUrl="https://nexus.ensighten.com/toyotanational/stage/Bootstrap.js",r}},{"./client/getBrand":7,"./getDeployEnvFunction":16}],18:[function(e,t,n){t.exports=function(e){var t=!isNaN(e);return"string"==typeof e&&5===e.length&&t}},{}],19:[function(e,t,n){const o=e("../models/Garage")["Garage"];t.exports=function(e){return new o(e)}},{"../models/Garage":5}],20:[function(e,t,n){var o,r,i,a;o=function(){function s(){for(var e=0,t={};e<arguments.length;e++){var n,o=arguments[e];for(n in o)t[n]=o[n]}return t}function d(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(c){function a(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var o=JSON.stringify(t);/^[\{\[]/.test(o)&&(t=o)}catch(e){}t=c.write?c.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r,i="";for(r in n)n[r]&&(i+="; "+r,!0!==n[r]&&(i+="="+n[r].split(";")[0]));return document.cookie=e+"="+t+i}}function t(e,t){if("undefined"!=typeof document){for(var n={},o=document.cookie?document.cookie.split("; "):[],r=0;r<o.length;r++){var i=o[r].split("="),a=i.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=d(i[0]),a=(c.read||c)(a,s)||d(a);if(t)try{a=JSON.parse(a)}catch(e){}if(n[s]=a,e===s)break}catch(e){}}return e?n[e]:n}}return a.set=n,a.get=function(e){return t(e,!1)},a.getJSON=function(e){return t(e,!0)},a.remove=function(e,t){n(e,"",s(t,{expires:-1}))},a.defaults={},a.withConverter=e,a}(function(){})},"function"==typeof define&&define.amd&&(define(o),r=!0),"object"==typeof n&&(t.exports=o(),r=!0),r||(i=window.Cookies,(a=window.Cookies=o()).noConflict=function(){return window.Cookies=i,a})},{}],21:[function(e,t,n){"use strict";function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(!0===e[0],!1,e)}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(!0===e[0],!0,e)}function c(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;++n)t.push(c(e[n]));return t}if(d(e)){t={};for(n in e)t[n]=c(e[n]);return t}return e}function d(e){return e&&"object"==typeof e&&!Array.isArray(e)}function a(e,t,n){var o;!e&&d(o=n.shift())||(o={});for(var r=0;r<n.length;++r){var i,a=n[r];if(d(a))for(var s in a)"__proto__"!==s&&"constructor"!==s&&"prototype"!==s&&(i=e?c(a[s]):a[s],o[s]=t?function e(t,n){if(!d(t))return n;for(var o in n)"__proto__"!==o&&"constructor"!==o&&"prototype"!==o&&(t[o]=d(t[o])&&d(n[o])?e(t[o],n[o]):n[o]);return t}(o[s],i):i)}return o}Object.defineProperty(n,"__esModule",{value:!0}),n.isPlainObject=n.clone=n.recursive=n.merge=n.main=void 0,t.exports=n=o,n.default=o,(n.main=o).clone=c,o.isPlainObject=d,o.recursive=i,n.merge=r,n.recursive=i,n.clone=c,n.isPlainObject=d},{}],22:[function(e,t,n){var o,r,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(o===setTimeout)return setTimeout(t,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(e){o=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,d=[],u=!1,l=-1;function g(){u&&c&&(u=!1,c.length?d=c.concat(d):l=-1,d.length&&p())}function p(){if(!u){var e=s(g);u=!0;for(var t=d.length;t;){for(c=d,d=[];++l<t;)c&&c[l].run();l=-1,t=d.length}c=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new h(e,t)),1!==d.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],23:[function(e,t,n){"use strict";var o={INTEGRATION_NAME:"toyota-smartpath",DEALER_EVENT_NAME:"dealership-info-v1",PAGE_EVENT_NAME:"page-load-v1",SAVES_PAGE:{ALIAS:"SMARTPATH_DIGITAL_GARAGE_SAVES",DEFAULT_PATH:"/digital-garage/saves.htm",LOOKUP_KEY:"savesUrl"},DEALS_PAGE:{ALIAS:"SMARTPATH_DIGITAL_GARAGE_DEALS",DEFAULT_PATH:"/digital-garage/deals.htm",LOOKUP_KEY:"dealsUrl"},REDIRECT_PAGE:{ALIAS:"SMARTPATH_DIGITAL_GARAGE_REDIRECT",DEFAULT_PATH:"/digital-garage/redirect.htm",LOOKUP_KEY:"redirectUrl"},BUILD_PAGE:{ALIAS:"SMARTPATH_DIGITAL_GARAGE_BUILD",DEFAULT_PATH:"/digital-garage/build.htm",LOOKUP_KEY:"buildsUrl"}};Object.freeze(o),t.exports=o},{}],24:[function(e,t,n){"use strict";const o=e("./constants/ddc");t.exports={DdcApi:class{constructor(){this.apiPromise=window.DDC.APILoader.create(document.currentScript||o.INTEGRATION_NAME)}getEventInfo(n){return new Promise(t=>{this.apiPromise.then(e=>e.subscribe(n,e=>t(e)))})}getConfig(){return this.apiPromise.then(e=>e.utils.getConfig())}insertElementToContent(o){return new Promise(n=>{this.apiPromise.then(t=>{t.insert("content",e=>{t.append(e,o),n()})})})}}}},{"./constants/ddc":23}],25:[function(e,t,n){"use strict";const i=e("./constants/ddc"),a=e("./ddcApi")["DdcApi"],s=e("./utils/getDeployEnv")["getDeployEnvFromLoaderScriptUrl"],{getLexusBuildsIFrame:o,buildYourLexusUrl:r,buildYourLexusIframeId:c}=e("./utils/getLexusBuildsIFrame"),d=e=>{const t=o();var n="https:"+r+"/#!/dealer/"+window.DGDataHub.dealerCd+"/zip/"+window.DGDataHub.zipCode+"/series/?parent="+window.location.origin+"/&";t.src=n+e};class u{constructor(e){this.dataHub=e}build(){return this.dataHub}async setupBuildsPage(e,t){if(this.dataHub.setIFrameSrcWithDGData=d,this.dataHub.zipCode=t.payload.dealershipPostalCode,!o()){const n=document.createElement("iframe");return n.id=c,n.style="width: 100%; height: 6200px",e.insertElementToContent(n)}}setPageRoutesOnDataHub(e){"lexus"===this.dataHub.BRAND&&(this.dataHub.pageRoutes={},this.dataHub.pageRoutes.buildRoute=e[i.BUILD_PAGE.LOOKUP_KEY]||i.BUILD_PAGE.DEFAULT_PATH)}setDealerCodeOnDataHub(e){this.dataHub.dealerCd=e.payload.dealershipCodes.toyota_smartpath||e.payload.dealershipCodes.lexus}setBrandOnDataHub(e){this.dataHub.BRAND=e.payload.franchises[0]}setMenuIconColor(e,t){this.dataHub.invertNavMenuIcons=t.invertIconDesktop||!1,"mobile"===e.payload.layoutType&&(this.dataHub.invertNavMenuIcons=t.invertIconMobile||!0)}setOnboardingModal(e){this.dataHub.autoOpenOnboardingModal=!e.hideOnboardingModal}setShowContinuePurchaseText(e){this.dataHub.showContinuePurchaseText=e.showContinuePurchaseText}}const l=async()=>{const e=new u({DEPLOY_ENV:s(),components:{"dg-nav-menu":!0,"dg-progress-tracker":!0,"dg-inline-saves":!1,"dg-toast-notification":!0,"dg-shopping-cart":!0},appVersions:{"dg-components":"1.0","dg-component-main":"1.0","ws-app":"1.0"},sidebarSettings:{display:!0},continuePageLoad:function(){},loadNewDealer:function(){}}),t=new a;var n=await t.getEventInfo(i.DEALER_EVENT_NAME),o=await t.getEventInfo(i.PAGE_EVENT_NAME),r=await t.getConfig();return e.setBrandOnDataHub(o),e.setPageRoutesOnDataHub(r),e.setDealerCodeOnDataHub(n),e.setMenuIconColor(o,r),e.setOnboardingModal(r),e.setShowContinuePurchaseText(r),o.payload.pageName!==i.BUILD_PAGE.ALIAS&&"BUILD_YOUR_LEXUS"!==o.payload.pageName||await e.setupBuildsPage(t,n),e.build()};t.exports={initializeDGDataHub:async()=>{window.DGDataHub=await l()},_buildDGDataHub:l}},{"./constants/ddc":23,"./ddcApi":24,"./utils/getDeployEnv":29,"./utils/getLexusBuildsIFrame":30}],26:[function(i,e,t){"use strict";!async function(){if(window.DDC)try{const t=i("./ddcService");await t.initializeDGDataHub()}catch(e){console.error("there was an error initializing dataHub with DDC API",e)}const e=i("./utils/currentlyOnLoginDataParserPage");if(!e()){const n=i("./utils/getLogger"),o=i("@digital-garage/dg-commons-library/src/utilities/client/triggerShowMyAccountEvent"),r=i("./service");try{r.getPageInfo(),r.loadScripts()}catch(e){o(!1),n.error(e)}}}()},{"./ddcService":25,"./service":27,"./utils/currentlyOnLoginDataParserPage":28,"./utils/getLogger":31,"@digital-garage/dg-commons-library/src/utilities/client/triggerShowMyAccountEvent":12}],27:[function(e,t,n){"use strict";const o=e("@digital-garage/dg-commons-library/src/utilities/client/isTCOM"),s=e("@digital-garage/dg-commons-library/src/utilities/client/makeRequestBrowser"),c=e("@digital-garage/dg-commons-library/src/utilities/isValidDealerCd"),r=e("@digital-garage/dg-commons-library/src/utilities/getLoaderScriptEnvironmentVariablesFunction"),i=e("@digital-garage/dg-commons-library/src/utilities/client/triggerShowMyAccountEvent"),a=e("@digital-garage/dg-commons-library/src/constants/appVersionAppNames"),d=e("@digital-garage/dg-commons-library/src/utilities/validateAndCreateGarage"),u=e("@digital-garage/dg-commons-library/src/utilities/client/isLexus"),l=e("@digital-garage/dg-commons-library/src/constants/brands"),g=e("./utils/getLogger"),p=e("./utils/getLexusBuildsIFrame")["getLexusBuildsIFrame"],h={dgid:"",garageDealerIsGxp:!1,isLoaded:!1,disDealer:{}};const m=(e,t)=>{var n=r();const o={[a.dgApp]:n.libUrl,[a.wsApp]:n.wsUrl,[a.dgComponentMain]:n.compUrl,[a.dgUI]:n.uiUrl}[e];return"string"==typeof o?o.replace("{{version}}",t).replace("{{name}}",e):null},w=()=>{window.DGDataHub.renderInlineSaves=e=>{e&&(window.DGDataHub.inlineSaveItems||(window.DGDataHub.inlineSaveItems={}),Object.assign(window.DGDataHub.inlineSaveItems,e))},window.DGDataHub.deleteInlineSaveItem=e=>{window.DGDataHub.inlineSaveItems&&window.DGDataHub.inlineSaveItems[e]&&delete window.DGDataHub.inlineSaveItems[e]},window.DGDataHub.deleteInlineSaveItems=e=>{e.map(e=>e&&window.DGDataHub.deleteInlineSaveItem(e))}};const f=(e=0)=>{if(window.DGDataHub)(()=>{if(window.DGDataHub.hasCalledLoaderGetPageInfo)g.debug("Has already started DG loader, so skipping this time");else{window.DGDataHub.hasCalledLoaderGetPageInfo=!0,window.DGDataHub.getDgid=()=>{},window.DGDataHub.showDealerWarning=e=>{e(),window.DGDataHub.continuePageLoad()},u()&&(window.DGDataHub.__internal__||(window.DGDataHub.__internal__={}),window.DGDataHub.__internal__.getLexusBuildsIFrame=p),window.DGDataHub.changeActiveDealer=e=>{window.DGDataHub.dealerCd?window.DGDataHub.dealerCd=e:g.warn("dealerCd is not defined on the DGDataHub. Should not be calling changeActiveDealer.")},window.DGDataHub.getWarningState=()=>({dgLoaded:h.isLoaded});try{var e="__dg_override_env__",t=window.localStorage.getItem(e)||window.sessionStorage.getItem(e);t&&(window.DGDataHub.DEPLOY_ENV=t,g.warn("Using override env",t))}catch(e){g.warn("Error setting override env",e)}}})();else{if(10<e)throw new ReferenceError("We cannot detect any valid window.DGDataHub object globally declared on this page. It should be of type object.");g.debug("Waiting for DGDataHub",{tries:e}),setTimeout(()=>f(e+1),50)}};t.exports={appData:h,loadScripts:()=>{var e;window.DGDataHub.hasStartedLoadingDG?g.debug("Has already started loading DG scripts, so skipping this time"):(window.DGDataHub.hasStartedLoadingDG=!0,e=function(e,t="latest"){if("object"!=typeof e)return"string"==typeof t||"number"==typeof t?{[a.wsApp]:t,[a.dgComponentMain]:t,[a.dgUI]:t}:(g.warn("Invalid DGDataHub setup. Expected DGDataHub.appVersion to be a string or number OR DGDataHub.appVersions to be an object {[appName]: version}",{appVersion:t,appVersions:e}),{});{const n=Object.assign({},e);return n[a.dgComponentMain]&&(n[a.dgUI]=t),n}}(window.DGDataHub.appVersions,window.DGDataHub.appVersion),g.info("Loading DG scripts",e),Object.entries(e).forEach(([e,t])=>((e,t="latest")=>{var n=m(e,t);if(null!==n){const o=window.document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",n),window.document.body.appendChild(o)}else g.warn("Could not get script url",{appName:e,version:t})})(e,t)),o()&&i(!0),window.DGDataHub.hasLoadedDG=!0,w())},getPageInfo:f,getDealerInfo:a=>{const o=r();return new Promise((r,i)=>{let e;try{if(!o.disUrl)throw new Error("Could not get valid DIS url");const n=new URL(o.disUrl+a);"prod"!==o.deployEnv&&n.searchParams.append("stage","true"),e=n.href}catch(e){return void i(e)}var t;c(a)?(t=u()?l.LEXUS:l.TOYOTA,s({method:"GET",url:e,headers:[{name:"brand",value:t}]}).then(e=>{let t;try{t=JSON.parse(e.data)}catch(e){return void i("Error parsing JSON received from DIS response"+e.toString())}let n=!1;try{for(const o of t.showDealerLocatorDataArea.dealerMetaData[0].dealerMetaDataDetail[0].additionalService)if(o.code&&"RTI"===o.code.value){n=o.participationIndicator;break}}catch(e){n=!1}r({dealerCd:a,isGxp:n})}).catch(e=>{i(e)})):r({isGxp:!1})})},getGarage:()=>{var e=r().garageUrl;if(!e)return Promise.reject(new Error("Could not get garage url"));e={method:"GET",url:e,withCredentials:!0,contentType:"application/x-www-form-urlencoded"};return s(e).then(e=>{e=JSON.parse(e.data);if(e.error&&"HAS_NO_ID"===e.error.code)throw e.error;e=d(e.garage);return h.dgid=e.dgid,e}).catch(e=>{throw e})},addInlineSavesFunctionsToDataHub:w}},{"./utils/getLexusBuildsIFrame":30,"./utils/getLogger":31,"@digital-garage/dg-commons-library/src/constants/appVersionAppNames":1,"@digital-garage/dg-commons-library/src/constants/brands":2,"@digital-garage/dg-commons-library/src/utilities/client/isLexus":9,"@digital-garage/dg-commons-library/src/utilities/client/isTCOM":10,"@digital-garage/dg-commons-library/src/utilities/client/makeRequestBrowser":11,"@digital-garage/dg-commons-library/src/utilities/client/triggerShowMyAccountEvent":12,"@digital-garage/dg-commons-library/src/utilities/getLoaderScriptEnvironmentVariablesFunction":17,"@digital-garage/dg-commons-library/src/utilities/isValidDealerCd":18,"@digital-garage/dg-commons-library/src/utilities/validateAndCreateGarage":19}],28:[function(e,t,n){"use strict";const o=window&&window.DGDataHub&&window.DGDataHub.pageRoutes&&window.DGDataHub.pageRoutes.loginDataParserRoute,r=window&&window.location.href;t.exports=()=>o&&r.includes(window.DGDataHub.pageRoutes.loginDataParserRoute)},{}],29:[function(e,t,n){"use strict";t.exports={getDeployEnvFromLoaderScriptUrl:()=>{const e=document.querySelector("[src*=dg-loader-app]").src;return e.includes(".demo")?"demo":e.includes(".stage")||e.includes("localhost")?"stage":e.includes(".test")?"test":e.includes(".dev")?"dev":"prod"}}},{}],30:[function(e,t,n){"use strict";const o="lexus-iframe-id",r="//lexus.com/build-your-lexus";t.exports={getLexusBuildsIFrame:()=>document.getElementById(o)||document.getElementById("resizeIframe")||document.querySelector('iframe[src*="'+r+'"]'),buildYourLexusUrl:r,buildYourLexusIframeId:o}},{}],31:[function(e,t,n){"use strict";const o=e("@digital-garage/dg-commons-library/src/models/Logger");e=new o("DG Loader Script");t.exports=e},{"@digital-garage/dg-commons-library/src/models/Logger":6}]},{},[26]);
//# sourceMappingURL=dg-loader-app.min.js.map
